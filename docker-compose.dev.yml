services:
  agent-runtime:
    build:
      context: .
      dockerfile: Dockerfile
      target: dev
    environment:
      AGENT_RUNTIME_ENV: ${AGENT_RUNTIME_ENV:-development}
    working_dir: /app
    command: ["air", "-c", ".air.toml"]
    volumes:
      - ./:/app
      - go_mod_cache:/go/pkg/mod
      - go_build_cache:/root/.cache/go-build
      - ext_plugin_cache:/data/agent-runtime/ext-plugin-cache

volumes:
  go_mod_cache:
  go_build_cache:
  ext_plugin_cache:
